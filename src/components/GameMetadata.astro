---
import type { CollectionEntry } from "astro:content";
import { getCategoryPath } from "@/utils/getGamePath";

type Props = {
  game: CollectionEntry<"games">;
};

const { game } = Astro.props;
const { category, rating, playCount, developer } = game.data;
const categoryPath = getCategoryPath(category);
---

<div class="flex flex-wrap items-center gap-4 text-sm text-skin-base/80">
  <a
    href={categoryPath}
    class="inline-flex items-center gap-1 rounded bg-skin-accent/10 px-3 py-1 font-medium capitalize text-skin-accent hover:bg-skin-accent/20"
  >
    <svg class="h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z" />
    </svg>
    {category}
  </a>

  {rating && (
    <div class="flex items-center gap-1">
      <svg class="h-5 w-5 fill-yellow-500" viewBox="0 0 20 20">
        <path d="M10 15l-5.878 3.09 1.123-6.545L.489 6.91l6.572-.955L10 0l2.939 5.955 6.572.955-4.756 4.635 1.123 6.545z" />
      </svg>
      <span class="font-semibold">{rating.toFixed(1)}</span>
      <span class="text-skin-base/60">/5</span>
    </div>
  )}

  {playCount > 0 && (
    <div class="flex items-center gap-1">
      <svg class="h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z" />
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
      </svg>
      <span>{playCount.toLocaleString()} plays</span>
    </div>
  )}

  {developer && (
    <div class="flex items-center gap-1">
      <svg class="h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
      </svg>
      <span>{developer}</span>
    </div>
  )}
</div>
