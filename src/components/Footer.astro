---
import type { HTMLAttributes } from "astro/types";
import Socials from "./Socials.astro";
import { getUiText } from "@/utils/getUiText";
import { getPageNavLinks } from "@/utils/getPageNavLinks";

const currentYear = new Date().getFullYear();
const pageNavLinks = await getPageNavLinks();

type Props = {
  noMarginTop?: boolean;
} & HTMLAttributes<"footer">;

const { noMarginTop = false, class: className, ...attrs } = Astro.props;
---

<footer
  class:list={["app-layout", { "mt-auto": !noMarginTop }, className]}
  {...attrs}
>
  <div class="py-6 sm:py-4 flex flex-col sm:flex-row items-center justify-between gap-4 text-sm">
    <!-- Left: Navigation Links -->
    <nav class="flex flex-wrap items-center justify-center sm:justify-start gap-x-2">
      {pageNavLinks.map((link, index) => (
        <>
          {index > 0 && <span class="text-border">|</span>}
          <a href={link.href} class="hover:text-accent">{link.title}</a>
        </>
      ))}
    </nav>

    <!-- Center: Social Icons -->
    <div class="flex-shrink-0">
      <Socials />
    </div>

    <!-- Right: Copyright -->
    <div class="flex flex-wrap items-center justify-center sm:justify-end gap-x-2 whitespace-nowrap">
      <span>{getUiText("footer.copyright")} {currentYear}</span>
      <span class="text-border">|</span>
      <span>{getUiText("footer.allRightsReserved")}</span>
    </div>
  </div>
</footer>
