---
import type { HTMLAttributes } from "astro/types";
import Socials from "./Socials.astro";
import { getUiText } from "@/utils/getUiText";
import { getPageNavLinks } from "@/utils/getPageNavLinks";

const currentYear = new Date().getFullYear();
const pageNavLinks = await getPageNavLinks();

type Props = {
  noMarginTop?: boolean;
} & HTMLAttributes<"footer">;

const { noMarginTop = false, class: className, ...attrs } = Astro.props;
---

<footer
  class:list={["app-layout", { "mt-auto": !noMarginTop }, className]}
  {...attrs}
>
  <div
    class="flex flex-col items-center justify-between gap-4 py-6 text-sm sm:flex-row sm:py-4"
  >
    <!-- Left: Navigation Links -->
    <nav
      class="flex flex-wrap items-center justify-center gap-x-2 sm:justify-start"
      aria-label={getUiText("footer.ariaNav")}
    >
      {
        pageNavLinks.map((link, index) => (
          <>
            {index > 0 && (
              <span class="text-border" aria-hidden="true">
                |
              </span>
            )}
            <a href={link.href} class="hover:text-accent">
              {link.title}
            </a>
          </>
        ))
      }
    </nav>

    <!-- Center: Social Icons -->
    <div class="flex-shrink-0">
      <Socials />
    </div>

    <!-- Right: Copyright -->
    <div
      class="flex flex-wrap items-center justify-center gap-x-2 whitespace-nowrap sm:justify-end"
    >
      <span>{getUiText("footer.copyright")} {currentYear}</span>
      <span class="text-border" aria-hidden="true">|</span>
      <span>{getUiText("footer.allRightsReserved")}</span>
    </div>
  </div>
</footer>
